"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1198],{7558:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var i=n(5893),a=n(1151),r=n(7628);const o={layout:"default",title:"Scriptable Agent Registration",nav_order:30,parent:"Advanced Topics"},s="Scriptable Agent Registration",c={id:"integration-agent/advanced-topics/scriptable-agent-registration",title:"Scriptable Agent Registration",description:"If you need to automate Agent configuration and registration tasks (i.e. direct user interaction with the Agent is not possible), you can use silent install and Scriptable Agent Registration.",source:"@site/docs/integration-agent/advanced-topics/scriptable-agent-registration.md",sourceDirName:"integration-agent/advanced-topics",slug:"/integration-agent/advanced-topics/scriptable-agent-registration",permalink:"/integration-platform-docs/docs/integration-agent/advanced-topics/scriptable-agent-registration",draft:!1,unlisted:!1,editUrl:"https://github.com/douglaslloyd/integration-platform-docs/tree/main/docs/integration-agent/advanced-topics/scriptable-agent-registration.md",tags:[],version:"current",lastUpdatedAt:1700332837,formattedLastUpdatedAt:"Nov 18, 2023",frontMatter:{layout:"default",title:"Scriptable Agent Registration",nav_order:30,parent:"Advanced Topics"},sidebar:"docsSidebar",previous:{title:"Retrieve Agent Credential",permalink:"/integration-platform-docs/docs/integration-agent/advanced-topics/retrieve-agent-credential"},next:{title:"Connecting to Other Environments",permalink:"/integration-platform-docs/docs/integration-agent/advanced-topics/connecting-to-other-environments"}},d={},l=[{value:"Prerequisites:",id:"prerequisites",level:2},{value:"Step 1: Retrieve an Access Token",id:"step-1-retrieve-an-access-token",level:2},{value:"Step 2: Retrieve a User Code",id:"step-2-retrieve-a-user-code",level:2},{value:"Step 3: Activate Device Code",id:"step-3-activate-device-code",level:2},{value:"Step 4: Update the Agent",id:"step-4-update-the-agent",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"scriptable-agent-registration",children:"Scriptable Agent Registration"}),"\n",(0,i.jsx)(t.p,{children:"If you need to automate Agent configuration and registration tasks (i.e. direct user interaction with the Agent is not possible), you can use silent install and Scriptable Agent Registration."}),"\n",(0,i.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"DataCloud or Avalanche Subscription"}),"\n",(0,i.jsx)(t.li,{children:"Install Integration Agent 3.1.0 or later."}),"\n",(0,i.jsx)(t.li,{children:"Enable an API Password for the User registering the Agent."}),"\n",(0,i.jsx)(t.li,{children:"Access to an API tool such as Postman, SoapUI, or Curl."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"step-1-retrieve-an-access-token",children:"Step 1: Retrieve an Access Token"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'REQUEST:\nPOST https://api.im.actiandatacloud.com/v2/api/login\n\nHEADER(S):\nContent-Type: application/json\n\nBODY:\n{\n    "username": "[username]",\n    "password": "[password text]"\n}\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'RESPONSE:\n200 OK\n\n{\n    "access_token": [access token value],\n    "token_type": "bearer",\n    "refresh_token": [refresh token value],\n    "expires_in": 36000\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"step-2-retrieve-a-user-code",children:"Step 2: Retrieve a User Code"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"REQUEST:\nPOST https://api.im.actiandatacloud.com/v2/api/device/code?client_id=integration-agent&host=[agent hostname]\n\nHEADER(S):\nAuthorization: Bearer [access token value]\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'RESPONSE:\n201 Created\n\n{\n    "approved": false,\n    "user_code": "[user code]",\n    "hostname": "[agent hostname]",\n    "device_code": "[device code]",\n    "verification_uri_complete": "[verification uri complete]",\n    "client_id": "integration-agent",\n    "expires_in": 599,\n    "interval": 15,\n    "owner": {\n        "id": "[user id]",\n        "name": "[username]"\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"step-3-activate-device-code",children:"Step 3: Activate Device Code"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"REQUEST:\nPOST [verification uri complete]\n\nHEADER(S):\nAuthorization: Bearer [access token value]\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"RESPONSE:\n200 OK\n\n# Integration Manager Connection Info\nim.base-url=[base url]\nim.client-id=[client id]\nim.client-secret=[client secret]\nim.device-code=[device code]\nim.user-code=[user code]\n"})}),"\n",(0,i.jsx)(t.h2,{id:"step-4-update-the-agent",children:"Step 4: Update the Agent"}),"\n","\n","\n",(0,i.jsx)(r.ZP,{name:"update_the_agent"})]})}function u(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},7628:(e,t,n)=>{n.d(t,{ZP:()=>o});var i=n(5893),a=n(1151);function r(e){const t={li:"li",ol:"ol",...(0,a.a)(),...e.components};return(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Copy and paste connection info into /IntegrationAgent/conf/application.properties file. Make sure to delete/overwrite any existing im.* values that may be present. Duplicate entries will yield inconsistent results."}),"\n",(0,i.jsx)(t.li,{children:"Start/restart Agent. It will now register itself."}),"\n"]})}function o(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>s,a:()=>o});var i=n(7294);const a={},r=i.createContext(a);function o(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);